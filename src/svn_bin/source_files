#!/bin/sh
# Do a little magic to run perl from anywhere in your path.

lines=`cat $0 | wc -l`
lines=`expr $lines - 16`
if [ "$checksys" != "SunOS" ]
then
  tail -n $lines $0 > /tmp/visitperl$$
else
  tail -$lines $0 > /tmp/visitperl$$
fi
echo "__END__" >> /tmp/visitperl$$
echo "$0 $*" >> /tmp/visitperl$$
exec perl /tmp/visitperl$$ $0 ${1+"$@"}

unlink($0);
$0 = shift @ARGV;

# ----------------------------------------------------------------------------

if  (! -d "engine")
{
   die "invoke $0 from the root of the VisIt source tree\n";
}

sub get ($@)
{
    my ($dir, $recursearg) = @_;
    @tmpfiles = `svn ls $recursearg $dir | egrep -v /\$`;
    my @files = ();
    foreach (@tmpfiles)
    {
        chomp;
        push @files, "$dir/$_";
    }
    return @files
}

sub get_svn_recursive ($@)
{
    my ($dir) = @_;
    return get($dir, "-R");
}

sub get_svn_norecursive ($@)
{
    my ($dir) = @_;
    return get($dir, "");
}

sub get_norecursive ($@)
{
    my ($files) = @_;
    @tmpfiles = `ls $files | egrep -v /\$`;
    my @files = ();
    foreach (@tmpfiles)
    {
        chomp;
        push @files, "$_";
    }
    return @files
}


@files = ();

push @files, get_svn_norecursive  ".";
push @files, get_svn_recursive    "./common";
push @files, get_svn_recursive    "./visit_vtk";
push @files, get_svn_recursive    "./engine";
push @files, get_svn_recursive    "./launcher";
push @files, get_svn_recursive    "./components";
push @files, get_svn_recursive    "./vtkqt";
push @files, get_svn_recursive    "./plots";
push @files, get_svn_recursive    "./operators";
push @files, get_svn_recursive    "./databases";
push @files, get_svn_recursive    "./winutil";
push @files, get_svn_recursive    "./viewer";
push @files, get_svn_recursive    "./gui";
push @files, get_svn_recursive    "./mdserver";
push @files, get_svn_recursive    "./visitpy";
push @files, get_svn_recursive    "./java";
push @files, get_svn_recursive    "./tools";
push @files, get_svn_recursive    "./sim";
push @files, get_svn_recursive    "./include";
push @files, get_svn_recursive    "./bin";
push @files, get_svn_recursive    "./exe";
push @files, get_svn_norecursive  "./lib";
push @files, get_svn_norecursive  "./help";
push @files, get_svn_recursive    "./archives";
push @files, get_svn_recursive    "./plugins";
push @files, get_svn_recursive    "./clearcase_bin";
push @files, get_svn_recursive    "./svn_bin";
push @files, get_svn_recursive    "./config-site";
push @files, get_svn_recursive    "./cqscore";
push @files, get_svn_recursive    "./third_party_builtin";
push @files, get_norecursive      "./help/visit.helpml";
push @files, get_norecursive      "./help/help*.html";
push @files, get_norecursive      "./help/list*.html";

foreach (sort @files)
{
    print "$_\n";
}

