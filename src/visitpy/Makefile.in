#                         Copyright (c) 2000 - 2006
#                 The Regents of the University of California
#            Produced at the Lawrence Livermore National Laboratory
#            Written by Sean Ahern, Kathleen Bonnell, Eric Brugger,
#           Hank Childs, Jeremy Meredith, Mark Miller, Brad Whitlock
#                              UCRL-CODE-220908
#                            All rights reserved.
#
# This file is part of VisIt. For details, see http://www.llnl.gov/visit/.
#
# Redistribution  and  use  in  source  and  binary  forms,  with  or  without
# modification, are permitted provided  that the following conditions are met:
#
# - Redistributions of  source code  must retain  the above  copyright notice,
#   this list of conditions and the disclaimer below.
# - Redistributions in binary form must  reproduce the above copyright notice,
#   this  list of  conditions  and  the  disclaimer  (as noted below)  in  the
#   documentation and/or materials provided with the distribution.
# - Neither the name of the  UC/LLNL nor the names of  its contributors may be
#   used to endorse  or promote products  derived from  this software  without
#   specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE  COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
# AND ANY EXPRESS OR  IMPLIED WARRANTIES,  INCLUDING, BUT NOT  LIMITED TO, THE
# IMPLIED WARRANTIES  OF MERCHANTABILITY AND FITNESS FOR  A PARTICULAR PURPOSE
# ARE  DISCLAIMED.  IN  NO  EVENT  SHALL  THE  REGENTS  OF  THE  UNIVERSITY OF
# CALIFORNIA, THE U.S. DEPARTMENT OF ENERGY  OR CONTRIBUTORS BE LIABLE FOR ANY
# DIRECT, INDIRECT,  INCIDENTAL, SPECIAL, EXEMPLARY, OR  CONSEQUENTIAL DAMAGES
# (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR  BUSINESS INTERRUPTION) HOWEVER CAUSED AND
# ON ANY THEORY OF  LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY, OR TORT
# (INCLUDING  NEGLIGENCE OR  OTHERWISE) ARISING IN ANY  WAY OUT OF  THE USE OF
# THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
# Additional BSD Notice
#
# 1. This notice is required  to be provided under our  contract with the U.S.
#    Department of Energy  (DOE). This work was produced  at the University of
#    California,  Lawrence Livermore National  Laboratory  under Contract  No.
#    W-7405-ENG-48 with the DOE.
#
# 2. Neither the  United States Government  nor the  University of  California
#    nor any of their  employees, makes  any warranty, express  or implied, or
#    assumes any liability  or responsibility for the  accuracy, completeness,
#    or  usefulness  of  any  information,   apparatus,  product,  or  process
#    disclosed, or represents that its  use would not infringe privately-owned
#    rights.
#
# 3. Also, reference herein  to any specific commercial  products, process, or
#    services by trade  name, trademark,  manufacturer  or otherwise  does not
#    necessarily  constitute  or imply  its  endorsement,  recommendation,  or
#    favoring by the United States Government or the University of California.
#    The views and  opinions of authors  expressed herein  do not  necessarily
#    state or reflect those of the  United States Government or the University
#    of  California,  and  shall  not  be  used  for  advertising  or  product
#    endorsement purposes.
#
# Modifications:
#    Jeremy Meredith, Wed Jan  9 13:21:35 PST 2002
#    Added configured LDFLAGS to the local ones.
#
#    Jeremy Meredith, Thu Feb 14 15:03:47 PST 2002
#    Added utility library.
#
#    Brad Whitlock, Tue Mar 26 17:03:01 PST 2002
#    I removed the rpc library.
#
#    Hank Childs, Wed May 22 08:43:01 PDT 2002
#    Put LDFLAGS in front of the object files.  g++ does not preprocess the
#    command line and take in flags, so some flags are effectively ignored if
#    not positioned correctly.
#
#    Hank Childs, Fri May 24 07:59:22 PDT 2002
#    Renamed SaveImageAtts to SaveWindowAtts.
#
#    Jeremy Meredith, Fri Jul 12 14:29:43 PDT 2002
#    Unified include directories.
#
#    Brad Whitlock, Tue Sep 24 09:31:40 PDT 2002
#    I added WindowInformation and RenderingAttributes.
#
#    Jeremy Meredith, Thu Oct 24 16:41:59 PDT 2002
#    Added material options.
#
#    Eric Brugger, Mon Nov 18 16:20:47 PST 2002
#    I added keyframe options.
#
#    Sean Ahern, Wed Feb  5 16:38:11 PST 2003
#    DBAtts uses the parser, so I included that library.
#
#    Kathleen Bonnell, Fri Jun  6 12:22:12 PDT 2003 
#    Added pick options.
#
#    Eric Brugger, Wed Aug 20 14:16:41 PDT 2003
#    I added View2DAttributes, View3DAttributes and ViewCurveAttributes.
#
#    Brad Whitlock, Wed Dec 3 17:27:44 PST 2003
#    I added PyTimeSliderObject and PyText2DObject.
#
#    Brad Whitlock, Fri Mar 19 08:49:00 PDT 2004
#    I added PyGlobalAttributes.
#
#    Kathleen Bonnell, Tue Mar 30 16:32:39 PST 2004 
#    I added PyQueryOverTimeAttributes.
#
#    Kathleen Bonnell, Thu Jul 22 09:31:45 PDT 2004 
#    I added PyGlobalLineoutAtributes.
#
#    Kathleen Bonnell, Mon Aug 16 11:41:34 PDT 2004 
#    I added PyInteractorAttributes.
#
#    Eric Brugger, Fri Sep  3 16:56:35 PDT 2004
#    I removed -L/usr/local/lib from the LDFLAGS.  The cli doesn't need
#    anything from that directory, but it can cause problems sometimes.
#    In particular, on gps the wrong libstdc++ gets loaded and the cli
#    crashes on startup.
#
#    Jeremy Meredith, Fri Oct 29 16:48:40 PDT 2004
#    Added support for lighting.
#
#    Jeremy Meredith, Tue Nov 23 14:53:07 PST 2004
#    Refactored the expression parser into two separate libraries.
#
#    Jeremy Meredith, Fri Dec 10 14:14:18 PST 2004
#    Added support for version-specific visit scripts and the ability to
#    launch tools without passing them as an argument to the visit script.
#
#    Brad Whitlock, Thu Mar 17 11:21:29 PDT 2005
#    Added PyDatabaseCorrelation.
#
#    Hank Childs, Mon Jun 13 11:25:47 PDT 2005
#    Added PyMethodDoc.
#
#    Brad Whitlock, Tue Jun 28 11:46:49 PDT 2005
#    Added John Anderson's PyLineObject and PyImageObject.
#
#    Hank Childs, Thu Jun 30 11:11:55 PDT 2005
#    Added PyExportDBAtts.
#
#    Mark C. Miller, Wed Nov 16 10:46:36 PST 2005
#    Added mesh management attributes
#
#    Brad Whitlock, Mon Jan 9 10:35:55 PDT 2006
#    Added Logging.C
#
#    Hank Childs, Mon Feb 13 21:13:27 PST 2006
#    Added ConstructDDFAttributes.
#
##############################################################################

##
## Programs and options...
##
@SET_MAKE@
@VARIABLES@

##
## Files...
##
SRC= \
    PyAnimationAttributes.C \
    PyAnnotationAttributes.C \
    PyConstructDDFAttributes.C \
    PyDatabaseCorrelation.C \
    PyExportDBAttributes.C \
    PyGlobalAttributes.C \
    PyGlobalLineoutAttributes.C \
    PyHostProfile.C \
    PyImageObject.C \
    PyInteractorAttributes.C \
    PyKeyframeAttributes.C \
    PyLightAttributes.C \
    PyLineObject.C \
    PyMaterialAttributes.C \
    PyMeshManagementAttributes.C \
    PyMethodDoc.C \
    PyPickAttributes.C \
    PyPrinterAttributes.C \
    PyProcessAttributes.C \
    PyQueryOverTimeAttributes.C \
    PyRenderingAttributes.C \
    PySaveWindowAttributes.C \
    PySILRestriction.C \
    PyText2DObject.C \
    PyTimeSliderObject.C \
    PyView2DAttributes.C \
    PyView3DAttributes.C \
    PyViewAttributes.C \
    PyViewCurveAttributes.C \
    PyWindowInformation.C \
    Logging.C \
    visitmodule.C

HDR= \
    PyAnimationAttributes.h \
    PyAnnotationAttributes.h \
    PyExportDBAttributes.h \
    PyDatabaseCorrelation.h \
    PyGlobalAttributes.h \
    PyGlobalLineoutAttributes.h \
    PyHostProfile.h \
    PyImageObject.h \
    PyInteractorAttributes.h \
    PyKeyframeAttributes.h \
    PyLightAttributes.h \
    PyLineObject.h \
    PyMaterialAttributes.h \
    PyMeshManagementAttributes.h \
    PyMethodDoc.h \
    PyPickAttributes.h \
    PyPrinterAttributes.h \
    PyProcessAttributes.h \
    PyQueryOverTimeAttributes.h \
    PyRenderingAttributes.h \
    PySaveWindowAttributes.h \
    PySILRestriction.h \
    PyText2DObject.h \
    PyTimeSliderObject.h \
    PyView2DAttributes.h \
    PyView3DAttributes.h \
    PyViewAttributes.h \
    PyViewCurveAttributes.h \
    PyWindowInformation.h

OBJ=$(SRC:.C=.o)
LIB=visitmodule
LIBNAME=$(LIB).@SHLIB_SOEXT@
CLI=$(tmpbin)/cli

##
## Override the certain variables with values from configure.
##
LDFLAGS=-L../lib @PY_LDFLAGS@ @LDFLAGS@
LIBS=@LIBS@ -lviewerproxy -lviewerrpc -lcomm -lmisc -lstate -lutility \
     -lplugin -ldbatts -lavtexceptions -lexpr -lparser @PY_LIB@
CXXFLAGS=@CXXFLAGS@ @PY_CXXFLAGS@ -I. -I../include/visit


##
## Standard targets...
##
all:  message $(CLI) $(LIBSHARED)
	$(RM) ../exe/$(LIBNAME)
	mv $(LIBSHARED) ../exe/$(LIBNAME)

$(CLI): $(OBJ) cli.o
	$(CXX) -o $@ $(CXXFLAGS) $(LDFLAGS) $(OBJ) cli.o @PY_CLI_LIB@ $(LIBS)

pure: $(OBJ) cli.o
	purify $(CXX) -o $(CLI) $(CXXFLAGS) $(LDFLAGS) $(OBJ) cli.o @PY_CLI_LIB@ $(LIBS)

clean:
	$(RM) $(LIBSTATIC) $(LIBSHARED) ../exe/$(LIBNAME) $(CLI)
	$(RM) $(OBJ) cli.o

message:
	@echo
	@echo "****************************************************************************"
	@echo "****************************************************************************"
	@echo "***"
	@echo "*** Building VisIt's Scripting Interface ($(tmpbin)/cli)"
	@echo "***"
	@echo "****************************************************************************"
	@echo "****************************************************************************"

##
## Automatic dependency stuff
##
@TARGETS@
@LIBTARGETS@
