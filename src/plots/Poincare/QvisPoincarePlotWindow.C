/*****************************************************************************
*
* Copyright (c) 2000 - 2008, Lawrence Livermore National Security, LLC
* Produced at the Lawrence Livermore National Laboratory
* LLNL-CODE-400142
* All rights reserved.
*
* This file is  part of VisIt. For  details, see https://visit.llnl.gov/.  The
* full copyright notice is contained in the file COPYRIGHT located at the root
* of the VisIt distribution or at http://www.llnl.gov/visit/copyright.html.
*
* Redistribution  and  use  in  source  and  binary  forms,  with  or  without
* modification, are permitted provided that the following conditions are met:
*
*  - Redistributions of  source code must  retain the above  copyright notice,
*    this list of conditions and the disclaimer below.
*  - Redistributions in binary form must reproduce the above copyright notice,
*    this  list of  conditions  and  the  disclaimer (as noted below)  in  the
*    documentation and/or other materials provided with the distribution.
*  - Neither the name of  the LLNS/LLNL nor the names of  its contributors may
*    be used to endorse or promote products derived from this software without
*    specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT  HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR  IMPLIED WARRANTIES, INCLUDING,  BUT NOT  LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND  FITNESS FOR A PARTICULAR  PURPOSE
* ARE  DISCLAIMED. IN  NO EVENT  SHALL LAWRENCE  LIVERMORE NATIONAL  SECURITY,
* LLC, THE  U.S.  DEPARTMENT OF  ENERGY  OR  CONTRIBUTORS BE  LIABLE  FOR  ANY
* DIRECT,  INDIRECT,   INCIDENTAL,   SPECIAL,   EXEMPLARY,  OR   CONSEQUENTIAL
* DAMAGES (INCLUDING, BUT NOT  LIMITED TO, PROCUREMENT OF  SUBSTITUTE GOODS OR
* SERVICES; LOSS OF  USE, DATA, OR PROFITS; OR  BUSINESS INTERRUPTION) HOWEVER
* CAUSED  AND  ON  ANY  THEORY  OF  LIABILITY,  WHETHER  IN  CONTRACT,  STRICT
* LIABILITY, OR TORT  (INCLUDING NEGLIGENCE OR OTHERWISE)  ARISING IN ANY  WAY
* OUT OF THE  USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
* DAMAGE.
*
*****************************************************************************/

#include "QvisPoincarePlotWindow.h"

#include <PoincareAttributes.h>
#include <ViewerProxy.h>

#include <QCheckBox>
#include <QLabel>
#include <QLayout>
#include <QLineEdit>
#include <QSpinBox>
#include <QButtonGroup>
#include <QRadioButton>
#include <QvisColorTableButton.h>
#include <QvisOpacitySlider.h>
#include <QvisColorButton.h>
#include <QvisLineStyleWidget.h>
#include <QvisLineWidthWidget.h>
#include <QvisVariableButton.h>

#include <stdio.h>
#include <string>

using std::string;

// ****************************************************************************
// Method: QvisPoincarePlotWindow::QvisPoincarePlotWindow
//
// Purpose: 
//   Constructor
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

QvisPoincarePlotWindow::QvisPoincarePlotWindow(const int type,
                         PoincareAttributes *subj,
                         const QString &caption,
                         const QString &shortName,
                         QvisNotepadArea *notepad)
    : QvisPostableWindowObserver(subj, caption, shortName, notepad)
{
    plotType = type;
    atts = subj;
}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::~QvisPoincarePlotWindow
//
// Purpose: 
//   Destructor
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

QvisPoincarePlotWindow::~QvisPoincarePlotWindow()
{
}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::CreateWindowContents
//
// Purpose: 
//   Creates the widgets for the window.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::CreateWindowContents()
{
    QGridLayout *mainLayout = new QGridLayout(0);
    topLayout->addLayout(mainLayout);

    terminationLabel = new QLabel(tr("Termination"), central);
    mainLayout->addWidget(terminationLabel,0,0);
    termination = new QLineEdit(central);
    connect(termination, SIGNAL(returnPressed()),
            this, SLOT(terminationProcessText()));
    mainLayout->addWidget(termination, 0,1);

    terminationTypeLabel = new QLabel(tr("Termination Type"), central);
    mainLayout->addWidget(terminationTypeLabel,1,0);
    terminationType = new QWidget(central);
    terminationTypeButtonGroup= new QButtonGroup(terminationType);
    QHBoxLayout *terminationTypeLayout = new QHBoxLayout(terminationType);
    terminationTypeLayout->setMargin(0);
    terminationTypeLayout->setSpacing(10);
    QRadioButton *terminationTypeTerminationTypeSteps = new QRadioButton(tr("Steps"), terminationType);
    terminationTypeButtonGroup->addButton(terminationTypeTerminationTypeSteps,0);
    terminationTypeLayout->addWidget(terminationTypeTerminationTypeSteps);
    QRadioButton *terminationTypeTerminationTypeDistance = new QRadioButton(tr("Distance"), terminationType);
    terminationTypeButtonGroup->addButton(terminationTypeTerminationTypeDistance,1);
    terminationTypeLayout->addWidget(terminationTypeTerminationTypeDistance);
    QRadioButton *terminationTypeTerminationTypeTime = new QRadioButton(tr("Time"), terminationType);
    terminationTypeButtonGroup->addButton(terminationTypeTerminationTypeTime,2);
    terminationTypeLayout->addWidget(terminationTypeTerminationTypeTime);
    connect(terminationTypeButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(terminationTypeChanged(int)));
    mainLayout->addWidget(terminationType, 1,1);

    integratorTypeLabel = new QLabel(tr("Integrator"), central);
    mainLayout->addWidget(integratorTypeLabel,2,0);
    integratorType = new QWidget(central);
    integratorTypeButtonGroup= new QButtonGroup(integratorType);
    QHBoxLayout *integratorTypeLayout = new QHBoxLayout(integratorType);
    integratorTypeLayout->setMargin(0);
    integratorTypeLayout->setSpacing(10);
    QRadioButton *integratorTypeIntegratorTypeRungeKutta = new QRadioButton(tr("RungeKutta"), integratorType);
    integratorTypeButtonGroup->addButton(integratorTypeIntegratorTypeRungeKutta,0);
    integratorTypeLayout->addWidget(integratorTypeIntegratorTypeRungeKutta);
    QRadioButton *integratorTypeIntegratorTypeAdamsBashforth = new QRadioButton(tr("AdamsBashforth"), integratorType);
    integratorTypeButtonGroup->addButton(integratorTypeIntegratorTypeAdamsBashforth,1);
    integratorTypeLayout->addWidget(integratorTypeIntegratorTypeAdamsBashforth);
    connect(integratorTypeButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(integratorTypeChanged(int)));
    mainLayout->addWidget(integratorType, 2,1);

    streamlineSourceLabel = new QLabel(tr("Streamline Source"), central);
    mainLayout->addWidget(streamlineSourceLabel,3,0);
    streamlineSource = new QWidget(central);
    streamlineSourceButtonGroup= new QButtonGroup(streamlineSource);
    QHBoxLayout *streamlineSourceLayout = new QHBoxLayout(streamlineSource);
    streamlineSourceLayout->setMargin(0);
    streamlineSourceLayout->setSpacing(10);
    QRadioButton *streamlineSourceSourceTypePointSource = new QRadioButton(tr("PointSource"), streamlineSource);
    streamlineSourceButtonGroup->addButton(streamlineSourceSourceTypePointSource,0);
    streamlineSourceLayout->addWidget(streamlineSourceSourceTypePointSource);
    QRadioButton *streamlineSourceSourceTypeLineSource = new QRadioButton(tr("LineSource"), streamlineSource);
    streamlineSourceButtonGroup->addButton(streamlineSourceSourceTypeLineSource,1);
    streamlineSourceLayout->addWidget(streamlineSourceSourceTypeLineSource);
    QRadioButton *streamlineSourceSourceTypePlaneSource = new QRadioButton(tr("PlaneSource"), streamlineSource);
    streamlineSourceButtonGroup->addButton(streamlineSourceSourceTypePlaneSource,2);
    streamlineSourceLayout->addWidget(streamlineSourceSourceTypePlaneSource);
    connect(streamlineSourceButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(streamlineSourceChanged(int)));
    mainLayout->addWidget(streamlineSource, 3,1);

    showStreamlines = new QCheckBox(tr("Show Streamlines"), central);
    connect(showStreamlines, SIGNAL(toggled(bool)),
            this, SLOT(showStreamlinesChanged(bool)));
    mainLayout->addWidget(showStreamlines, 4,0);

    showPoints = new QCheckBox(tr("Show Points"), central);
    connect(showPoints, SIGNAL(toggled(bool)),
            this, SLOT(showPointsChanged(bool)));
    mainLayout->addWidget(showPoints, 5,0);

    pointDensityLabel = new QLabel(tr("Point Density"), central);
    mainLayout->addWidget(pointDensityLabel,6,0);
    pointDensity = new QLineEdit(central);
    connect(pointDensity, SIGNAL(returnPressed()),
            this, SLOT(pointDensityProcessText()));
    mainLayout->addWidget(pointDensity, 6,1);

    sourceRadiusLabel = new QLabel(tr("Source Radius"), central);
    mainLayout->addWidget(sourceRadiusLabel,7,0);
    sourceRadius = new QLineEdit(central);
    connect(sourceRadius, SIGNAL(returnPressed()),
            this, SLOT(sourceRadiusProcessText()));
    mainLayout->addWidget(sourceRadius, 7,1);

    pointSourceLabel = new QLabel(tr("Point Source"), central);
    mainLayout->addWidget(pointSourceLabel,8,0);
    pointSource = new QLineEdit(central);
    connect(pointSource, SIGNAL(returnPressed()),
            this, SLOT(pointSourceProcessText()));
    mainLayout->addWidget(pointSource, 8,1);

    lineSourceStartLabel = new QLabel(tr("Line Point Start"), central);
    mainLayout->addWidget(lineSourceStartLabel,9,0);
    lineSourceStart = new QLineEdit(central);
    connect(lineSourceStart, SIGNAL(returnPressed()),
            this, SLOT(lineSourceStartProcessText()));
    mainLayout->addWidget(lineSourceStart, 9,1);

    lineSourceEndLabel = new QLabel(tr("Line Point End"), central);
    mainLayout->addWidget(lineSourceEndLabel,10,0);
    lineSourceEnd = new QLineEdit(central);
    connect(lineSourceEnd, SIGNAL(returnPressed()),
            this, SLOT(lineSourceEndProcessText()));
    mainLayout->addWidget(lineSourceEnd, 10,1);

    planeSourcePointLabel = new QLabel(tr("Plane Source Point"), central);
    mainLayout->addWidget(planeSourcePointLabel,11,0);
    planeSourcePoint = new QLineEdit(central);
    connect(planeSourcePoint, SIGNAL(returnPressed()),
            this, SLOT(planeSourcePointProcessText()));
    mainLayout->addWidget(planeSourcePoint, 11,1);

    planeSourceNormalLabel = new QLabel(tr("Plane Source Normal"), central);
    mainLayout->addWidget(planeSourceNormalLabel,12,0);
    planeSourceNormal = new QLineEdit(central);
    connect(planeSourceNormal, SIGNAL(returnPressed()),
            this, SLOT(planeSourceNormalProcessText()));
    mainLayout->addWidget(planeSourceNormal, 12,1);

    planeSourceUpVecLabel = new QLabel(tr("Plane Source Up Vec"), central);
    mainLayout->addWidget(planeSourceUpVecLabel,13,0);
    planeSourceUpVec = new QLineEdit(central);
    connect(planeSourceUpVec, SIGNAL(returnPressed()),
            this, SLOT(planeSourceUpVecProcessText()));
    mainLayout->addWidget(planeSourceUpVec, 13,1);

    colorTableNameLabel = new QLabel(tr("Color table"), central);
    mainLayout->addWidget(colorTableNameLabel,14,0);
    colorTableName = new QvisColorTableButton(central);
    connect(colorTableName, SIGNAL(selectedColorTable(bool, const QString&)),
            this, SLOT(colorTableNameChanged(bool, const QString&)));
    mainLayout->addWidget(colorTableName, 14,1);

    singleColorLabel = new QLabel(tr("Single color"), central);
    mainLayout->addWidget(singleColorLabel,15,0);
    singleColor = new QvisColorButton(central);
    connect(singleColor, SIGNAL(selectedColor(const QColor&)),
            this, SLOT(singleColorChanged(const QColor&)));
    mainLayout->addWidget(singleColor, 15,1);

    legendFlag = new QCheckBox(tr("Legend"), central);
    connect(legendFlag, SIGNAL(toggled(bool)),
            this, SLOT(legendFlagChanged(bool)));
    mainLayout->addWidget(legendFlag, 16,0);

    lightingFlag = new QCheckBox(tr("Lighting"), central);
    connect(lightingFlag, SIGNAL(toggled(bool)),
            this, SLOT(lightingFlagChanged(bool)));
    mainLayout->addWidget(lightingFlag, 17,0);

    relTolLabel = new QLabel(tr("rel. tolerance"), central);
    mainLayout->addWidget(relTolLabel,18,0);
    relTol = new QLineEdit(central);
    connect(relTol, SIGNAL(returnPressed()),
            this, SLOT(relTolProcessText()));
    mainLayout->addWidget(relTol, 18,1);

    absTolLabel = new QLabel(tr("abs. tolerance"), central);
    mainLayout->addWidget(absTolLabel,19,0);
    absTol = new QLineEdit(central);
    connect(absTol, SIGNAL(returnPressed()),
            this, SLOT(absTolProcessText()));
    mainLayout->addWidget(absTol, 19,1);

    maxStepLengthLabel = new QLabel(tr("maximum step length"), central);
    mainLayout->addWidget(maxStepLengthLabel,20,0);
    maxStepLength = new QLineEdit(central);
    connect(maxStepLength, SIGNAL(returnPressed()),
            this, SLOT(maxStepLengthProcessText()));
    mainLayout->addWidget(maxStepLength, 20,1);

    NumberPlanesLabel = new QLabel(tr("NumberPlanes"), central);
    mainLayout->addWidget(NumberPlanesLabel,21,0);
    NumberPlanes = new QLineEdit(central);
    connect(NumberPlanes, SIGNAL(returnPressed()),
            this, SLOT(NumberPlanesProcessText()));
    mainLayout->addWidget(NumberPlanes, 21,1);

    ColorStyleLabel = new QLabel(tr("ColorStyle value"), central);
    mainLayout->addWidget(ColorStyleLabel,22,0);
    ColorStyle = new QWidget(central);
    ColorStyleButtonGroup= new QButtonGroup(ColorStyle);
    QHBoxLayout *ColorStyleLayout = new QHBoxLayout(ColorStyle);
    ColorStyleLayout->setMargin(0);
    ColorStyleLayout->setSpacing(10);
    QRadioButton *ColorStyleColorStyleTypeOriginalValue = new QRadioButton(tr("OriginalValue"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeOriginalValue,0);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeOriginalValue);
    QRadioButton *ColorStyleColorStyleTypeInputOrder = new QRadioButton(tr("InputOrder"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeInputOrder,1);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeInputOrder);
    QRadioButton *ColorStyleColorStyleTypePointIndex = new QRadioButton(tr("PointIndex"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypePointIndex,2);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypePointIndex);
    QRadioButton *ColorStyleColorStyleTypePlane = new QRadioButton(tr("Plane"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypePlane,3);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypePlane);
    QRadioButton *ColorStyleColorStyleTypeToroidalWindingOrder = new QRadioButton(tr("ToroidalWindingOrder"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeToroidalWindingOrder,4);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeToroidalWindingOrder);
    QRadioButton *ColorStyleColorStyleTypeToroidalWindingPointOrder = new QRadioButton(tr("ToroidalWindingPointOrder"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeToroidalWindingPointOrder,5);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeToroidalWindingPointOrder);
    QRadioButton *ColorStyleColorStyleTypeToroidalWindings = new QRadioButton(tr("ToroidalWindings"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeToroidalWindings,6);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeToroidalWindings);
    QRadioButton *ColorStyleColorStyleTypePoloidalWindings = new QRadioButton(tr("PoloidalWindings"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypePoloidalWindings,7);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypePoloidalWindings);
    QRadioButton *ColorStyleColorStyleTypeSafetyFactor = new QRadioButton(tr("SafetyFactor"), ColorStyle);
    ColorStyleButtonGroup->addButton(ColorStyleColorStyleTypeSafetyFactor,8);
    ColorStyleLayout->addWidget(ColorStyleColorStyleTypeSafetyFactor);
    connect(ColorStyleButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(ColorStyleChanged(int)));
    mainLayout->addWidget(ColorStyle, 22,1);

    MaxToroidalWindingLabel = new QLabel(tr("MaxToroidalWinding"), central);
    mainLayout->addWidget(MaxToroidalWindingLabel,23,0);
    MaxToroidalWinding = new QLineEdit(central);
    connect(MaxToroidalWinding, SIGNAL(returnPressed()),
            this, SLOT(MaxToroidalWindingProcessText()));
    mainLayout->addWidget(MaxToroidalWinding, 23,1);

    OverrideToroidalWindingLabel = new QLabel(tr("OverrideToroidalWinding"), central);
    mainLayout->addWidget(OverrideToroidalWindingLabel,24,0);
    OverrideToroidalWinding = new QLineEdit(central);
    connect(OverrideToroidalWinding, SIGNAL(returnPressed()),
            this, SLOT(OverrideToroidalWindingProcessText()));
    mainLayout->addWidget(OverrideToroidalWinding, 24,1);

    HitRateLabel = new QLabel(tr("HitRate"), central);
    mainLayout->addWidget(HitRateLabel,25,0);
    HitRate = new QLineEdit(central);
    connect(HitRate, SIGNAL(returnPressed()),
            this, SLOT(HitRateProcessText()));
    mainLayout->addWidget(HitRate, 25,1);

    ShowCurvesLabel = new QLabel(tr("ShowCurves"), central);
    mainLayout->addWidget(ShowCurvesLabel,26,0);
    ShowCurves = new QWidget(central);
    ShowCurvesButtonGroup= new QButtonGroup(ShowCurves);
    QHBoxLayout *ShowCurvesLayout = new QHBoxLayout(ShowCurves);
    ShowCurvesLayout->setMargin(0);
    ShowCurvesLayout->setSpacing(10);
    QRadioButton *ShowCurvesShowMeshTypeCurves = new QRadioButton(tr("Curves"), ShowCurves);
    ShowCurvesButtonGroup->addButton(ShowCurvesShowMeshTypeCurves,0);
    ShowCurvesLayout->addWidget(ShowCurvesShowMeshTypeCurves);
    QRadioButton *ShowCurvesShowMeshTypeSurfaces = new QRadioButton(tr("Surfaces"), ShowCurves);
    ShowCurvesButtonGroup->addButton(ShowCurvesShowMeshTypeSurfaces,1);
    ShowCurvesLayout->addWidget(ShowCurvesShowMeshTypeSurfaces);
    connect(ShowCurvesButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(ShowCurvesChanged(int)));
    mainLayout->addWidget(ShowCurves, 26,1);

    AdjustPlaneLabel = new QLabel(tr("AdjustPlane"), central);
    mainLayout->addWidget(AdjustPlaneLabel,27,0);
    AdjustPlane = new QLineEdit(central);
    connect(AdjustPlane, SIGNAL(returnPressed()),
            this, SLOT(AdjustPlaneProcessText()));
    mainLayout->addWidget(AdjustPlane, 27,1);

    ShowIslands = new QCheckBox(tr("ShowIslands"), central);
    connect(ShowIslands, SIGNAL(toggled(bool)),
            this, SLOT(ShowIslandsChanged(bool)));
    mainLayout->addWidget(ShowIslands, 28,0);

    OverlapsLabel = new QLabel(tr("Overlaps"), central);
    mainLayout->addWidget(OverlapsLabel,29,0);
    Overlaps = new QWidget(central);
    OverlapsButtonGroup= new QButtonGroup(Overlaps);
    QHBoxLayout *OverlapsLayout = new QHBoxLayout(Overlaps);
    OverlapsLayout->setMargin(0);
    OverlapsLayout->setSpacing(10);
    QRadioButton *OverlapsOverlapTypeRaw = new QRadioButton(tr("Raw"), Overlaps);
    OverlapsButtonGroup->addButton(OverlapsOverlapTypeRaw,0);
    OverlapsLayout->addWidget(OverlapsOverlapTypeRaw);
    QRadioButton *OverlapsOverlapTypeRemove = new QRadioButton(tr("Remove"), Overlaps);
    OverlapsButtonGroup->addButton(OverlapsOverlapTypeRemove,1);
    OverlapsLayout->addWidget(OverlapsOverlapTypeRemove);
    QRadioButton *OverlapsOverlapTypeMerge = new QRadioButton(tr("Merge"), Overlaps);
    OverlapsButtonGroup->addButton(OverlapsOverlapTypeMerge,2);
    OverlapsLayout->addWidget(OverlapsOverlapTypeMerge);
    QRadioButton *OverlapsOverlapTypeSmooth = new QRadioButton(tr("Smooth"), Overlaps);
    OverlapsButtonGroup->addButton(OverlapsOverlapTypeSmooth,3);
    OverlapsLayout->addWidget(OverlapsOverlapTypeSmooth);
    connect(OverlapsButtonGroup, SIGNAL(buttonClicked(int)),
            this, SLOT(OverlapsChanged(int)));
    mainLayout->addWidget(Overlaps, 29,1);

}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::UpdateWindow
//
// Purpose: 
//   Updates the widgets in the window when the subject changes.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::UpdateWindow(bool doAll)
{

    for(int i = 0; i < atts->NumAttributes(); ++i)
    {
        if(!doAll)
        {
            if(!atts->IsSelected(i))
            {
                continue;
            }
        }

        switch(i)
        {
          case PoincareAttributes::ID_termination:
            termination->setText(DoubleToQString(atts->GetTermination()));
            break;
          case PoincareAttributes::ID_terminationType:
            terminationTypeButtonGroup->blockSignals(true);
            if(terminationTypeButtonGroup->button((int)atts->GetTerminationType()) != 0)
                terminationTypeButtonGroup->button((int)atts->GetTerminationType())->setChecked(true);
            terminationTypeButtonGroup->blockSignals(false);
            break;
          case PoincareAttributes::ID_integratorType:
            integratorTypeButtonGroup->blockSignals(true);
            if(integratorTypeButtonGroup->button((int)atts->GetIntegratorType()) != 0)
                integratorTypeButtonGroup->button((int)atts->GetIntegratorType())->setChecked(true);
            integratorTypeButtonGroup->blockSignals(false);
            break;
          case PoincareAttributes::ID_streamlineSource:
            if (atts->GetStreamlineSource() == PoincareAttributes::LineSource || atts->GetStreamlineSource() == PoincareAttributes::PlaneSource)
            {
                pointDensity->setEnabled(true);
                if(pointDensityLabel)
                    pointDensityLabel->setEnabled(true);
            }
            else
            {
                pointDensity->setEnabled(false);
                if(pointDensityLabel)
                    pointDensityLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::PlaneSource)
            {
                sourceRadius->setEnabled(true);
                if(sourceRadiusLabel)
                    sourceRadiusLabel->setEnabled(true);
            }
            else
            {
                sourceRadius->setEnabled(false);
                if(sourceRadiusLabel)
                    sourceRadiusLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::PointSource)
            {
                pointSource->setEnabled(true);
                if(pointSourceLabel)
                    pointSourceLabel->setEnabled(true);
            }
            else
            {
                pointSource->setEnabled(false);
                if(pointSourceLabel)
                    pointSourceLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::LineSource)
            {
                lineSourceStart->setEnabled(true);
                if(lineSourceStartLabel)
                    lineSourceStartLabel->setEnabled(true);
            }
            else
            {
                lineSourceStart->setEnabled(false);
                if(lineSourceStartLabel)
                    lineSourceStartLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::LineSource)
            {
                lineSourceEnd->setEnabled(true);
                if(lineSourceEndLabel)
                    lineSourceEndLabel->setEnabled(true);
            }
            else
            {
                lineSourceEnd->setEnabled(false);
                if(lineSourceEndLabel)
                    lineSourceEndLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::PlaneSource)
            {
                planeSourcePoint->setEnabled(true);
                if(planeSourcePointLabel)
                    planeSourcePointLabel->setEnabled(true);
            }
            else
            {
                planeSourcePoint->setEnabled(false);
                if(planeSourcePointLabel)
                    planeSourcePointLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::PlaneSource)
            {
                planeSourceNormal->setEnabled(true);
                if(planeSourceNormalLabel)
                    planeSourceNormalLabel->setEnabled(true);
            }
            else
            {
                planeSourceNormal->setEnabled(false);
                if(planeSourceNormalLabel)
                    planeSourceNormalLabel->setEnabled(false);
            }
            if (atts->GetStreamlineSource() == PoincareAttributes::PlaneSource)
            {
                planeSourceUpVec->setEnabled(true);
                if(planeSourceUpVecLabel)
                    planeSourceUpVecLabel->setEnabled(true);
            }
            else
            {
                planeSourceUpVec->setEnabled(false);
                if(planeSourceUpVecLabel)
                    planeSourceUpVecLabel->setEnabled(false);
            }
            streamlineSourceButtonGroup->blockSignals(true);
            if(streamlineSourceButtonGroup->button((int)atts->GetStreamlineSource()) != 0)
                streamlineSourceButtonGroup->button((int)atts->GetStreamlineSource())->setChecked(true);
            streamlineSourceButtonGroup->blockSignals(false);
            break;
          case PoincareAttributes::ID_showStreamlines:
            showStreamlines->blockSignals(true);
            showStreamlines->setChecked(atts->GetShowStreamlines());
            showStreamlines->blockSignals(false);
            break;
          case PoincareAttributes::ID_showPoints:
            showPoints->blockSignals(true);
            showPoints->setChecked(atts->GetShowPoints());
            showPoints->blockSignals(false);
            break;
          case PoincareAttributes::ID_pointDensity:
            pointDensity->setText(IntToQString(atts->GetPointDensity()));
            break;
          case PoincareAttributes::ID_sourceRadius:
            sourceRadius->setText(DoubleToQString(atts->GetSourceRadius()));
            break;
          case PoincareAttributes::ID_pointSource:
            pointSource->setText(DoublesToQString(atts->GetPointSource(), 3));
            break;
          case PoincareAttributes::ID_lineSourceStart:
            lineSourceStart->setText(DoublesToQString(atts->GetLineSourceStart(), 3));
            break;
          case PoincareAttributes::ID_lineSourceEnd:
            lineSourceEnd->setText(DoublesToQString(atts->GetLineSourceEnd(), 3));
            break;
          case PoincareAttributes::ID_planeSourcePoint:
            planeSourcePoint->setText(DoublesToQString(atts->GetPlaneSourcePoint(), 3));
            break;
          case PoincareAttributes::ID_planeSourceNormal:
            planeSourceNormal->setText(DoublesToQString(atts->GetPlaneSourceNormal(), 3));
            break;
          case PoincareAttributes::ID_planeSourceUpVec:
            planeSourceUpVec->setText(DoublesToQString(atts->GetPlaneSourceUpVec(), 3));
            break;
          case PoincareAttributes::ID_colorTableName:
            colorTableName->blockSignals(true);
            colorTableName->setColorTable(QString(atts->GetColorTableName().c_str()));
            colorTableName->blockSignals(false);
            break;
          case PoincareAttributes::ID_singleColor:
            { // new scope
                QColor tempcolor = QColor(atts->GetSingleColor().Red(),
                                   atts->GetSingleColor().Green(),
                                   atts->GetSingleColor().Blue());
                singleColor->blockSignals(true);
                singleColor->setButtonColor(tempcolor);
                singleColor->blockSignals(false);
            }
            break;
          case PoincareAttributes::ID_legendFlag:
            legendFlag->blockSignals(true);
            legendFlag->setChecked(atts->GetLegendFlag());
            legendFlag->blockSignals(false);
            break;
          case PoincareAttributes::ID_lightingFlag:
            lightingFlag->blockSignals(true);
            lightingFlag->setChecked(atts->GetLightingFlag());
            lightingFlag->blockSignals(false);
            break;
          case PoincareAttributes::ID_relTol:
            relTol->setText(DoubleToQString(atts->GetRelTol()));
            break;
          case PoincareAttributes::ID_absTol:
            absTol->setText(DoubleToQString(atts->GetAbsTol()));
            break;
          case PoincareAttributes::ID_maxStepLength:
            maxStepLength->setText(DoubleToQString(atts->GetMaxStepLength()));
            break;
          case PoincareAttributes::ID_NumberPlanes:
            NumberPlanes->setText(IntToQString(atts->GetNumberPlanes()));
            break;
          case PoincareAttributes::ID_ColorStyle:
            ColorStyleButtonGroup->blockSignals(true);
            if(ColorStyleButtonGroup->button((int)atts->GetColorStyle()) != 0)
                ColorStyleButtonGroup->button((int)atts->GetColorStyle())->setChecked(true);
            ColorStyleButtonGroup->blockSignals(false);
            break;
          case PoincareAttributes::ID_MaxToroidalWinding:
            MaxToroidalWinding->setText(IntToQString(atts->GetMaxToroidalWinding()));
            break;
          case PoincareAttributes::ID_OverrideToroidalWinding:
            OverrideToroidalWinding->setText(IntToQString(atts->GetOverrideToroidalWinding()));
            break;
          case PoincareAttributes::ID_HitRate:
            HitRate->setText(DoubleToQString(atts->GetHitRate()));
            break;
          case PoincareAttributes::ID_ShowCurves:
            ShowCurvesButtonGroup->blockSignals(true);
            if(ShowCurvesButtonGroup->button((int)atts->GetShowCurves()) != 0)
                ShowCurvesButtonGroup->button((int)atts->GetShowCurves())->setChecked(true);
            ShowCurvesButtonGroup->blockSignals(false);
            break;
          case PoincareAttributes::ID_AdjustPlane:
            AdjustPlane->setText(IntToQString(atts->GetAdjustPlane()));
            break;
          case PoincareAttributes::ID_ShowIslands:
            ShowIslands->blockSignals(true);
            ShowIslands->setChecked(atts->GetShowIslands());
            ShowIslands->blockSignals(false);
            break;
          case PoincareAttributes::ID_Overlaps:
            OverlapsButtonGroup->blockSignals(true);
            if(OverlapsButtonGroup->button((int)atts->GetOverlaps()) != 0)
                OverlapsButtonGroup->button((int)atts->GetOverlaps())->setChecked(true);
            OverlapsButtonGroup->blockSignals(false);
            break;
        }
    }
}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::GetCurrentValues
//
// Purpose: 
//   Gets values from certain widgets and stores them in the subject.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::GetCurrentValues(int which_widget)
{
    bool doAll = (which_widget == -1);

    // Do termination
    if(which_widget == PoincareAttributes::ID_termination || doAll)
    {
        double val;
        if(LineEditGetDouble(termination, val))
            atts->SetTermination(val);
        else
        {
            ResettingError(tr("Termination"),
                DoubleToQString(atts->GetTermination()));
            atts->SetTermination(atts->GetTermination());
        }
    }

    // Do pointDensity
    if(which_widget == PoincareAttributes::ID_pointDensity || doAll)
    {
        int val;
        if(LineEditGetInt(pointDensity, val))
            atts->SetPointDensity(val);
        else
        {
            ResettingError(tr("Point Density"),
                IntToQString(atts->GetPointDensity()));
            atts->SetPointDensity(atts->GetPointDensity());
        }
    }

    // Do sourceRadius
    if(which_widget == PoincareAttributes::ID_sourceRadius || doAll)
    {
        double val;
        if(LineEditGetDouble(sourceRadius, val))
            atts->SetSourceRadius(val);
        else
        {
            ResettingError(tr("Source Radius"),
                DoubleToQString(atts->GetSourceRadius()));
            atts->SetSourceRadius(atts->GetSourceRadius());
        }
    }

    // Do pointSource
    if(which_widget == PoincareAttributes::ID_pointSource || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(pointSource, val, 3))
            atts->SetPointSource(val);
        else
        {
            ResettingError(tr("Point Source"),
                DoublesToQString(atts->GetPointSource(),3));
            atts->SetPointSource(atts->GetPointSource());
        }
    }

    // Do lineSourceStart
    if(which_widget == PoincareAttributes::ID_lineSourceStart || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(lineSourceStart, val, 3))
            atts->SetLineSourceStart(val);
        else
        {
            ResettingError(tr("Line Point Start"),
                DoublesToQString(atts->GetLineSourceStart(),3));
            atts->SetLineSourceStart(atts->GetLineSourceStart());
        }
    }

    // Do lineSourceEnd
    if(which_widget == PoincareAttributes::ID_lineSourceEnd || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(lineSourceEnd, val, 3))
            atts->SetLineSourceEnd(val);
        else
        {
            ResettingError(tr("Line Point End"),
                DoublesToQString(atts->GetLineSourceEnd(),3));
            atts->SetLineSourceEnd(atts->GetLineSourceEnd());
        }
    }

    // Do planeSourcePoint
    if(which_widget == PoincareAttributes::ID_planeSourcePoint || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(planeSourcePoint, val, 3))
            atts->SetPlaneSourcePoint(val);
        else
        {
            ResettingError(tr("Plane Source Point"),
                DoublesToQString(atts->GetPlaneSourcePoint(),3));
            atts->SetPlaneSourcePoint(atts->GetPlaneSourcePoint());
        }
    }

    // Do planeSourceNormal
    if(which_widget == PoincareAttributes::ID_planeSourceNormal || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(planeSourceNormal, val, 3))
            atts->SetPlaneSourceNormal(val);
        else
        {
            ResettingError(tr("Plane Source Normal"),
                DoublesToQString(atts->GetPlaneSourceNormal(),3));
            atts->SetPlaneSourceNormal(atts->GetPlaneSourceNormal());
        }
    }

    // Do planeSourceUpVec
    if(which_widget == PoincareAttributes::ID_planeSourceUpVec || doAll)
    {
        double val[3];
        if(LineEditGetDoubles(planeSourceUpVec, val, 3))
            atts->SetPlaneSourceUpVec(val);
        else
        {
            ResettingError(tr("Plane Source Up Vec"),
                DoublesToQString(atts->GetPlaneSourceUpVec(),3));
            atts->SetPlaneSourceUpVec(atts->GetPlaneSourceUpVec());
        }
    }

    // Do relTol
    if(which_widget == PoincareAttributes::ID_relTol || doAll)
    {
        double val;
        if(LineEditGetDouble(relTol, val))
            atts->SetRelTol(val);
        else
        {
            ResettingError(tr("rel. tolerance"),
                DoubleToQString(atts->GetRelTol()));
            atts->SetRelTol(atts->GetRelTol());
        }
    }

    // Do absTol
    if(which_widget == PoincareAttributes::ID_absTol || doAll)
    {
        double val;
        if(LineEditGetDouble(absTol, val))
            atts->SetAbsTol(val);
        else
        {
            ResettingError(tr("abs. tolerance"),
                DoubleToQString(atts->GetAbsTol()));
            atts->SetAbsTol(atts->GetAbsTol());
        }
    }

    // Do maxStepLength
    if(which_widget == PoincareAttributes::ID_maxStepLength || doAll)
    {
        double val;
        if(LineEditGetDouble(maxStepLength, val))
            atts->SetMaxStepLength(val);
        else
        {
            ResettingError(tr("maximum step length"),
                DoubleToQString(atts->GetMaxStepLength()));
            atts->SetMaxStepLength(atts->GetMaxStepLength());
        }
    }

    // Do NumberPlanes
    if(which_widget == PoincareAttributes::ID_NumberPlanes || doAll)
    {
        int val;
        if(LineEditGetInt(NumberPlanes, val))
            atts->SetNumberPlanes(val);
        else
        {
            ResettingError(tr("NumberPlanes"),
                IntToQString(atts->GetNumberPlanes()));
            atts->SetNumberPlanes(atts->GetNumberPlanes());
        }
    }

    // Do MaxToroidalWinding
    if(which_widget == PoincareAttributes::ID_MaxToroidalWinding || doAll)
    {
        int val;
        if(LineEditGetInt(MaxToroidalWinding, val))
            atts->SetMaxToroidalWinding(val);
        else
        {
            ResettingError(tr("MaxToroidalWinding"),
                IntToQString(atts->GetMaxToroidalWinding()));
            atts->SetMaxToroidalWinding(atts->GetMaxToroidalWinding());
        }
    }

    // Do OverrideToroidalWinding
    if(which_widget == PoincareAttributes::ID_OverrideToroidalWinding || doAll)
    {
        int val;
        if(LineEditGetInt(OverrideToroidalWinding, val))
            atts->SetOverrideToroidalWinding(val);
        else
        {
            ResettingError(tr("OverrideToroidalWinding"),
                IntToQString(atts->GetOverrideToroidalWinding()));
            atts->SetOverrideToroidalWinding(atts->GetOverrideToroidalWinding());
        }
    }

    // Do HitRate
    if(which_widget == PoincareAttributes::ID_HitRate || doAll)
    {
        double val;
        if(LineEditGetDouble(HitRate, val))
            atts->SetHitRate(val);
        else
        {
            ResettingError(tr("HitRate"),
                DoubleToQString(atts->GetHitRate()));
            atts->SetHitRate(atts->GetHitRate());
        }
    }

    // Do AdjustPlane
    if(which_widget == PoincareAttributes::ID_AdjustPlane || doAll)
    {
        int val;
        if(LineEditGetInt(AdjustPlane, val))
            atts->SetAdjustPlane(val);
        else
        {
            ResettingError(tr("AdjustPlane"),
                IntToQString(atts->GetAdjustPlane()));
            atts->SetAdjustPlane(atts->GetAdjustPlane());
        }
    }

}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::Apply
//
// Purpose: 
//   Called to apply changes in the subject.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::Apply(bool ignore)
{
    if(AutoUpdate() || ignore)
    {
        GetCurrentValues(-1);
        atts->Notify();

        GetViewerMethods()->SetPlotOptions(plotType);
    }
    else
        atts->Notify();
}


//
// Qt Slot functions
//


// ****************************************************************************
// Method: QvisPoincarePlotWindow::apply
//
// Purpose: 
//   Qt slot function called when apply button is clicked.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::apply()
{
    Apply(true);
}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::makeDefault
//
// Purpose: 
//   Qt slot function called when "Make default" button is clicked.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::makeDefault()
{
    GetCurrentValues(-1);
    atts->Notify();
    GetViewerMethods()->SetDefaultPlotOptions(plotType);
}


// ****************************************************************************
// Method: QvisPoincarePlotWindow::reset
//
// Purpose: 
//   Qt slot function called when reset button is clicked.
//
// Note:       Autogenerated by xml2window.
//
// Programmer: xml2window
// Creation:   omitted
//
// Modifications:
//   
// ****************************************************************************

void
QvisPoincarePlotWindow::reset()
{
    GetViewerMethods()->ResetPlotOptions(plotType);
}


void
QvisPoincarePlotWindow::terminationProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_termination);
    Apply();
}


void
QvisPoincarePlotWindow::terminationTypeChanged(int val)
{
    if(val != atts->GetTerminationType())
    {
        atts->SetTerminationType(PoincareAttributes::TerminationType(val));
        SetUpdate(false);
        Apply();
    }
}


void
QvisPoincarePlotWindow::integratorTypeChanged(int val)
{
    if(val != atts->GetIntegratorType())
    {
        atts->SetIntegratorType(PoincareAttributes::IntegratorType(val));
        SetUpdate(false);
        Apply();
    }
}


void
QvisPoincarePlotWindow::streamlineSourceChanged(int val)
{
    if(val != atts->GetStreamlineSource())
    {
        atts->SetStreamlineSource(PoincareAttributes::SourceType(val));
        Apply();
    }
}


void
QvisPoincarePlotWindow::showStreamlinesChanged(bool val)
{
    atts->SetShowStreamlines(val);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::showPointsChanged(bool val)
{
    atts->SetShowPoints(val);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::pointDensityProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_pointDensity);
    Apply();
}


void
QvisPoincarePlotWindow::sourceRadiusProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_sourceRadius);
    Apply();
}


void
QvisPoincarePlotWindow::pointSourceProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_pointSource);
    Apply();
}


void
QvisPoincarePlotWindow::lineSourceStartProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_lineSourceStart);
    Apply();
}


void
QvisPoincarePlotWindow::lineSourceEndProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_lineSourceEnd);
    Apply();
}


void
QvisPoincarePlotWindow::planeSourcePointProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_planeSourcePoint);
    Apply();
}


void
QvisPoincarePlotWindow::planeSourceNormalProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_planeSourceNormal);
    Apply();
}


void
QvisPoincarePlotWindow::planeSourceUpVecProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_planeSourceUpVec);
    Apply();
}


void
QvisPoincarePlotWindow::colorTableNameChanged(bool useDefault, const QString &ctName)
{
    atts->SetColorTableName(ctName.toStdString());
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::singleColorChanged(const QColor &color)
{
    ColorAttribute temp(color.red(), color.green(), color.blue());
    atts->SetSingleColor(temp);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::legendFlagChanged(bool val)
{
    atts->SetLegendFlag(val);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::lightingFlagChanged(bool val)
{
    atts->SetLightingFlag(val);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::relTolProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_relTol);
    Apply();
}


void
QvisPoincarePlotWindow::absTolProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_absTol);
    Apply();
}


void
QvisPoincarePlotWindow::maxStepLengthProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_maxStepLength);
    Apply();
}


void
QvisPoincarePlotWindow::NumberPlanesProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_NumberPlanes);
    Apply();
}


void
QvisPoincarePlotWindow::ColorStyleChanged(int val)
{
    if(val != atts->GetColorStyle())
    {
        atts->SetColorStyle(PoincareAttributes::ColorStyleType(val));
        SetUpdate(false);
        Apply();
    }
}


void
QvisPoincarePlotWindow::MaxToroidalWindingProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_MaxToroidalWinding);
    Apply();
}


void
QvisPoincarePlotWindow::OverrideToroidalWindingProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_OverrideToroidalWinding);
    Apply();
}


void
QvisPoincarePlotWindow::HitRateProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_HitRate);
    Apply();
}


void
QvisPoincarePlotWindow::ShowCurvesChanged(int val)
{
    if(val != atts->GetShowCurves())
    {
        atts->SetShowCurves(PoincareAttributes::ShowMeshType(val));
        SetUpdate(false);
        Apply();
    }
}


void
QvisPoincarePlotWindow::AdjustPlaneProcessText()
{
    GetCurrentValues(PoincareAttributes::ID_AdjustPlane);
    Apply();
}


void
QvisPoincarePlotWindow::ShowIslandsChanged(bool val)
{
    atts->SetShowIslands(val);
    SetUpdate(false);
    Apply();
}


void
QvisPoincarePlotWindow::OverlapsChanged(int val)
{
    if(val != atts->GetOverlaps())
    {
        atts->SetOverlaps(PoincareAttributes::OverlapType(val));
        SetUpdate(false);
        Apply();
    }
}


