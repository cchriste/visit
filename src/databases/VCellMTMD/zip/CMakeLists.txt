PROJECT(zip)

FILE (GLOB SRC_FILES *.c)

ADD_DEFINITIONS(-DUSE_ZIPMAIN -DSTATIC_LIB -DNO_ASM)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
IF (WIN32)
LIST(APPEND SRC_FILES
win32/nt.c
win32/win32.c
)
INCLUDE_DIRECTORIES(win32)
ADD_DEFINITIONS(-DWIN32 -DMSDOS)
ELSE (WIN32)
LIST(APPEND SRC_FILES
unix/unix.c
)
INCLUDE_DIRECTORIES(unix)
ADD_DEFINITIONS(-DUNIX -DNO_ASM -DHAVE_DIRENT_H -DHAVE_TERMIOS_H)
ENDIF (WIN32)

SET_SOURCE_FILES_PROPERTIES( ${SRC_FILES} PROPERTIES LANGUAGE CXX )
ADD_LIBRARY(zip STATIC ${SRC_FILES})
