#                            Copyright 2000 - 2006
#                 The Regents of the University of California.
#                             All rights reserved.
#
# This work  was produced at the  University of California, Lawrence Livermore
# National Laboratory  (UC LLNL)  under contract no.   W-7405-ENG-48 (Contract
# 48) between  the U.S.  Department  of Energy (DOE)  and  The Regents  of the
# University  of   California (University)   for   the operation  of UC  LLNL.
# Copyright  is reserved  to     the University for   purposes  of  controlled
# dissemination,   commercialization   through   formal licensing,   or  other
# disposition  under  terms  of Contract   48; DOE  policies, regulations  and
# orders;  and U.S.   statutes.  The  rights of   the  Federal Government  are
# reserved under  Contract 48 subject to the  restrictions agreed  upon by DOE
# and University.
#
#                                 DISCLAIMER
#
# This software was prepared as an  account of work sponsored  by an agency of
# the United  States Government. Neither the United  States Government nor the
# University of California  nor any  of their  employees, makes any  warranty,
# express or  implied,  or assumes  any  liability  or responsiblity for   the
# accuracy, completeness,  or   usefullness of   any  information,  apparatus,
# product, or process disclosed, or represents that its use would not infringe
# privately   owned  rights. Reference    herein to   any specific  commercial
# products, process, or service   by trade name, trademark,   manufacturer, or
# otherwise,  does not    necessarily  constitute or    imply its endorsement,
# recommendation,  or  favoring by    the  United  States Government  or   the
# University of California. The views and opinions of authors expressed herein
# do not necessarily state or reflect those of the United States Government or
# the University of  California,  and shall not  be  used for  advertising  or
# product endorsement purposes.
#
# Modifications:
#
##############################################################################

@SET_MAKE@
@VARIABLES@

#
# Override some make variables
#
CFLAGS=@CFLAGS@ -g -I. -I$(TOPDIR)/include -I$(TOPDIR)/include/visit
LDFLAGS=@LDFLAGS@ -Wl,--export-dynamic -L$(TOPDIR)/archives
LIBS=@LIBS@ -lsim
F77FLAGS=-I$(TOPDIR)/include/visit
FLIBS=@LIBS@ -lsimf -lsim
BUILD_FORTRAN=allfortran

PARLIBS=-lmpich

# LIBSIM examples
SIM1=sim1
OBJ_SIM1=sim1.o

SIM2=sim2
OBJ_SIM2=sim2.o
SIM2P=sim2p
SRC_SIM2P=$(SIM2P).c
OBJ_SIM2P=$(SRC_SIM2P:.c=_par.o)

SIM3=sim3
OBJ_SIM3=sim3.o
SIM3P=sim3p
SRC_SIM3P=$(SIM3P).c
OBJ_SIM3P=$(SRC_SIM3P:.c=_par.o)

SIM4=sim4
OBJ_SIM4=sim4.o
SIM4P=sim4p
SRC_SIM4P=$(SIM4P).c
OBJ_SIM4P=$(SRC_SIM4P:.c=_par.o)
FSIM4=fsim4
FOBJ_SIM4=fsim4.o

# Data access function examples
SIM5=sim5
OBJ_SIM5=sim5.o
FSIM5=fsim5
FOBJ_SIM5=fsim5.o

SIM6=sim6
OBJ_SIM6=sim6.o
FSIM6=fsim6
FOBJ_SIM6=fsim6.o

SIM7=sim7
OBJ_SIM7=sim7.o
FSIM7=fsim7
FOBJ_SIM7=fsim7.o

SIM8=sim8
OBJ_SIM8=sim8.o
FSIM8=fsim8
FOBJ_SIM8=fsim8.o

SIM9=sim9
OBJ_SIM9=sim9.o
FSIM9=fsim9
FOBJ_SIM9=fsim9.o

SIM10=sim10
OBJ_SIM10=sim10.o
FSIM10=fsim10
FOBJ_SIM10=fsim10.o

SIM11=sim11
OBJ_SIM11=sim11.o
FSIM11=fsim11
FOBJ_SIM11=fsim11.o

SIM12=sim12
OBJ_SIM12=sim12.o
FSIM12=fsim12
FOBJ_SIM12=fsim12.o

# Mesh simulations
MESH=mesh
OBJ_MESH=mesh.o
FMESH=fmesh
FOBJ_MESH=fmesh.o

POINT=point
OBJ_POINT=point.o
FPOINT=fpoint
FOBJ_POINT=fpoint.o

UNSTRUCTURED=unstructured
OBJ_UNSTRUCTURED=unstructured.o
FUNSTRUCTURED=funstructured
FOBJ_UNSTRUCTURED=funstructured.o

# Scalar simulations
SCALAR=scalar
OBJ_SCALAR=scalar.o
FSCALAR=fscalar
FOBJ_SCALAR=fscalar.o


all: allc @BUILD_FORTRAN@

allc: libsimdemo metadata meshsims scalarsims

allfortran: flibsimdemo fmetadata fmeshsims fscalarsims

libsimdemo: $(SIM1) $(SIM2) $(SIM2P) $(SIM3) $(SIM3P) $(SIM4) $(SIM4P)

flibsimdemo: $(FSIM4)

metadata:  $(SIM5) $(SIM6) $(SIM7) $(SIM8) $(SIM9) $(SIM10) $(SIM11) $(SIM12)

fmetadata: $(FSIM5) $(FSIM6) $(FSIM7) $(FSIM8) $(FSIM9) $(FSIM10) $(FSIM11) $(FSIM12)

meshsims: $(MESH) $(UNSTRUCTURED)

fmeshsims: $(FMESH) $(FUNSTRUCTURED)

scalarsims: $(SCALAR) 

fscalarsims: $(FSCALAR)

clean: cleanlibsim cleanmetadata cleanmesh cleanscalar

cleanlibsim:
	$(RM) $(SIM1) $(OBJ_SIM1)
	$(RM) $(SIM2) $(OBJ_SIM2) $(SIM2P) $(OBJ_SIM2P)
	$(RM) $(SIM3) $(OBJ_SIM3) $(SIM3P) $(OBJ_SIM3P)
	$(RM) $(SIM4) $(OBJ_SIM4) $(SIM4P) $(OBJ_SIM4P) $(FSIM4) $(FOBJ_SIM4)

cleanmetadata:
	$(RM) $(SIM5) $(OBJ_SIM5) $(FSIM5) $(FOBJ_SIM5)
	$(RM) $(SIM6) $(OBJ_SIM6) $(FSIM6) $(FOBJ_SIM6)
	$(RM) $(SIM7) $(OBJ_SIM7) $(FSIM7) $(FOBJ_SIM7)
	$(RM) $(SIM8) $(OBJ_SIM8) $(FSIM8) $(FOBJ_SIM8)
	$(RM) $(SIM9) $(OBJ_SIM9) $(FSIM9) $(FOBJ_SIM9)
	$(RM) $(SIM10) $(OBJ_SIM10) $(FSIM10) $(FOBJ_SIM10)
	$(RM) $(SIM11) $(OBJ_SIM11) $(FSIM11) $(FOBJ_SIM11)
	$(RM) $(SIM12) $(OBJ_SIM12) $(FSIM12) $(FOBJ_SIM12)

cleanmesh:
	$(RM) $(MESH) $(OBJ_MESH) $(FMESH) $(FOBJ_MESH)
	$(RM) $(POINT) $(OBJ_POINT) $(FPOINT) $(FOBJ_POINT)
	$(RM) $(UNSTRUCTURED) $(OBJ_UNSTRUCTURED) $(FUNSTRUCTURED) $(FOBJ_UNSTRUCTURED)

cleanscalar:
	$(RM) $(SCALAR) $(OBJ_SCALAR) $(FSCALAR) $(FOBJ_SCALAR)

$(SIM1): $(OBJ_SIM1)
	$(CC) -o $(SIM1) $(OBJ_SIM1) $(LDFLAGS) $(LIBS)

$(SIM2): $(OBJ_SIM2)
	$(CC) -o $(SIM2) $(OBJ_SIM2) $(LDFLAGS) $(LIBS)

$(SIM2P): $(OBJ_SIM2P)
	$(CC) -o $(SIM2P) $(OBJ_SIM2P) $(LDFLAGS) $(LIBS) $(PARLIBS)

$(SIM3): $(OBJ_SIM3)
	$(CC) -o $(SIM3) $(OBJ_SIM3) $(LDFLAGS) $(LIBS)

$(SIM3P): $(OBJ_SIM3P)
	$(CC) -o $(SIM3P) $(OBJ_SIM3P) $(LDFLAGS) $(LIBS) $(PARLIBS)

$(SIM4): $(OBJ_SIM4)
	$(CC) -o $(SIM4) $(OBJ_SIM4) $(LDFLAGS) $(LIBS)

$(SIM4P): $(OBJ_SIM4P)
	$(CC) -o $(SIM4P) $(OBJ_SIM4P) $(LDFLAGS) $(LIBS) $(PARLIBS)

$(FSIM4): $(FOBJ_SIM4)
	$(F77) -o $(FSIM4) $(FOBJ_SIM4) $(LDFLAGS) $(FLIBS)

$(SIM5): $(OBJ_SIM5)
	$(CC) -o $(SIM5) $(OBJ_SIM5) $(LDFLAGS) $(LIBS)

$(FSIM5): $(FOBJ_SIM5)
	$(F77) -o $(FSIM5) $(FOBJ_SIM5) $(LDFLAGS) $(FLIBS)

$(SIM6): $(OBJ_SIM6)
	$(CC) -o $(SIM6) $(OBJ_SIM6) $(LDFLAGS) $(LIBS)

$(FSIM6): $(FOBJ_SIM6)
	$(F77) -o $(FSIM6) $(FOBJ_SIM6) $(LDFLAGS) $(FLIBS)

$(SIM7): $(OBJ_SIM7)
	$(CC) -o $(SIM7) $(OBJ_SIM7) $(LDFLAGS) $(LIBS)

$(FSIM7): $(FOBJ_SIM7)
	$(F77) -o $(FSIM7) $(FOBJ_SIM7) $(LDFLAGS) $(FLIBS)

$(SIM8): $(OBJ_SIM8)
	$(CC) -o $(SIM8) $(OBJ_SIM8) $(LDFLAGS) $(LIBS)

$(FSIM8): $(FOBJ_SIM8)
	$(F77) -o $(FSIM8) $(FOBJ_SIM8) $(LDFLAGS) $(FLIBS)

$(SIM9): $(OBJ_SIM9)
	$(CC) -o $(SIM9) $(OBJ_SIM9) $(LDFLAGS) $(LIBS)

$(FSIM9): $(FOBJ_SIM9)
	$(F77) -o $(FSIM9) $(FOBJ_SIM9) $(LDFLAGS) $(FLIBS)

$(SIM10): $(OBJ_SIM10)
	$(CC) -o $(SIM10) $(OBJ_SIM10) $(LDFLAGS) $(LIBS)

$(FSIM10): $(FOBJ_SIM10)
	$(F77) -o $(FSIM10) $(FOBJ_SIM10) $(LDFLAGS) $(FLIBS)

$(SIM11): $(OBJ_SIM11)
	$(CC) -o $(SIM11) $(OBJ_SIM11) $(LDFLAGS) $(LIBS)

$(FSIM11): $(FOBJ_SIM11)
	$(F77) -o $(FSIM11) $(FOBJ_SIM11) $(LDFLAGS) $(FLIBS)

$(SIM12): $(OBJ_SIM12)
	$(CC) -o $(SIM12) $(OBJ_SIM12) $(LDFLAGS) $(LIBS)

$(FSIM12): $(FOBJ_SIM12)
	$(F77) -o $(FSIM12) $(FOBJ_SIM12) $(LDFLAGS) $(FLIBS)


$(MESH): $(OBJ_MESH)
	$(CC) -o $(MESH) $(OBJ_MESH) $(LDFLAGS) $(LIBS)

$(FMESH): $(FOBJ_MESH)
	$(F77) -o $(FMESH) $(FOBJ_MESH) $(LDFLAGS) $(FLIBS)

$(POINT): $(OBJ_POINT)
	$(CC) -o $(POINT) $(OBJ_POINT) $(LDFLAGS) $(LIBS) -lm

$(FPOINT): $(FOBJ_POINT)
	$(F77) -o $(FPOINT) $(FOBJ_POINT) $(LDFLAGS) $(FLIBS)

$(UNSTRUCTURED): $(OBJ_UNSTRUCTURED)
	$(CC) -o $(UNSTRUCTURED) $(OBJ_UNSTRUCTURED) $(LDFLAGS) $(LIBS)

$(FUNSTRUCTURED): $(FOBJ_UNSTRUCTURED)
	$(F77) -o $(FUNSTRUCTURED) $(FOBJ_UNSTRUCTURED) $(LDFLAGS) $(FLIBS)

$(SCALAR): $(OBJ_SCALAR)
	$(CC) -o $(SCALAR) $(OBJ_SCALAR) $(LDFLAGS) $(LIBS)

$(FSCALAR): $(FOBJ_SCALAR)
	$(F77) -o $(FSCALAR) $(FOBJ_SCALAR) $(LDFLAGS) $(FLIBS)


@TARGETS@
